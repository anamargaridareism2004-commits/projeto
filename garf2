import matplotlib.pyplot as plt
import clinic as c

def extraiTempo(serie):
    res = []
    for t, _ in serie:
        res.append(t)
    return res

def extraiOcup(serie):
    res = []
    for _, o in serie:
        res.append(o)
    return res

def grafEvolucaoOcupacao():
    res = c.simula()                 # corre 1 simulação
    serie = res["serie_ocup"]        # [(tempo, ocupacao)]

    x = extraiTempo(serie)
    y = extraiOcup(serie)

    # garante que começa no tempo 0 (opcional, mas costuma ficar melhor)
    if len(x) > 0 and x[0] > 0:
        x = [0.0] + x
        y = [0.0] + y

    plt.step(x, y, where="post", label="Taxa de ocupação dos médicos")
    plt.title("Evolução da taxa de ocupação dos médicos")
    plt.xlabel("Tempo de simulação (min)")
    plt.ylabel("Taxa de ocupação")
    plt.ylim(0, 1.05)
    plt.legend()
    plt.show()

if __name__ == "__main__":
    grafEvolucaoOcupacao()
